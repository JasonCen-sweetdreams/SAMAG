Coordinating task allocation in multi-agent systems is a challenging problem, particularly in dynamic and uncertain environments. This paper proposes a novel approach that combines graph neural networks and deep reinforcement learning to learn effective task allocation policies. Our method, called GraphMA, represents the agent-task graph as a dynamic relational structure and uses a hierarchical graph reinforcement learning framework to optimize task allocation. We evaluate GraphMA on a variety of task allocation benchmarks and demonstrate significant improvements over state-of-the-art methods in terms of task completion rate, agent utilization, and adaptability to changing environments.