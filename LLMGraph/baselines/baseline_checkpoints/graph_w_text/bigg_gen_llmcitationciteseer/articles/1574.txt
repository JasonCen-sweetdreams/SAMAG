In multi-agent systems, task allocation is a crucial problem that requires efficient and scalable solutions. This paper proposes a novel hierarchical task allocation framework that leverages distributed constraint optimization (DCOP) to allocate tasks to agents. Our approach models the task allocation problem as a hierarchical DCOP, where agents are organized into clusters and sub-clusters to reduce the problem size. We develop a novel algorithm that uses a combination of constraint propagation and local search to find high-quality solutions. Experimental results on a variety of benchmark domains demonstrate that our approach outperforms existing methods in terms of solution quality and scalability.