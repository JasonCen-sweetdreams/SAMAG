This paper presents a novel hierarchical task network planning framework for multi-agent systems operating in uncertain environments. We extend the traditional HTN framework to incorporate probabilistic uncertainty models for tasks and agents, allowing for more robust and adaptive planning. Our approach utilizes a layered planning architecture, where a high-level planner generates a abstract plan, which is then refined by a low-level planner using sampling-based motion planning. We evaluate our approach on a range of simulated scenarios, demonstrating improved plan success rates and reduced planning times compared to existing methods.