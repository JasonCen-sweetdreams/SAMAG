In this paper, we tackle the challenging problem of decentralized task allocation in heterogeneous multi-agent systems. We propose a novel deep reinforcement learning approach, called HAMA, which enables agents to learn effective task allocation policies in a distributed manner. HAMA leverages a graph neural network to model the complex interactions between agents and tasks, and a decentralized actor-critic framework to optimize the allocation policy. Experimental results on a variety of synthetic and real-world scenarios demonstrate the superior performance and scalability of HAMA compared to existing approaches, showcasing its potential for real-world applications such as disaster response and smart logistics.