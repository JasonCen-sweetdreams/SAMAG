In decentralized multi-agent systems, task allocation is a complex problem due to the heterogeneity of agents' capabilities and preferences. This paper proposes a novel multi-agent reinforcement learning framework, 'HATRA', which enables agents to learn decentralized task allocation strategies in dynamic environments. HATRA incorporates a graph neural network to model agent interactions and a hierarchical reinforcement learning architecture to handle task dependencies. We evaluate HATRA in a simulated disaster response scenario, demonstrating improved task allocation efficiency and adaptability compared to existing decentralized methods.