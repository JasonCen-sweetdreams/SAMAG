This paper presents a novel multi-agent planning framework for smart home automation, where agents must coordinate to achieve complex tasks while respecting resource constraints. We introduce a decentralized planning algorithm, 'MAP-RC', which leverages a hierarchical task network representation and a constraint-based optimization approach to generate efficient plans. We evaluate MAP-RC on a realistic smart home scenario, demonstrating improved plan quality and reduced computational overhead compared to existing centralized and distributed planning methods.