Effective task allocation is crucial in multi-agent systems, as it directly impacts system performance and efficiency. This paper presents a novel deep reinforcement learning framework, 'CoopTask', which learns to allocate tasks to agents in a coordinated manner. Our approach leverages a graph neural network to model agent interactions and task dependencies, and a hierarchical policy to optimize task assignments. Experimental results on a simulated warehouse management scenario demonstrate that CoopTask outperforms state-of-the-art methods in terms of task completion time and agent utilization.