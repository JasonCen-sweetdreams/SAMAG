This paper presents a novel hierarchical task-network planning framework for multi-agent systems operating in dynamic environments. We introduce a probabilistic planning model that integrates task decomposition, scheduling, and execution monitoring to ensure efficient and adaptive task allocation among agents. Our approach leverages a hierarchical task representation to manage complexity and incorporates environment uncertainty using Bayesian networks. Experimental results in a simulated search-and-rescue scenario demonstrate improved task completion rates and reduced communication overhead compared to existing decentralized planning methods.