In this paper, we address the challenging problem of task allocation in heterogeneous multi-agent systems, where agents have different capabilities and preferences. We propose a decentralized framework that leverages deep reinforcement learning to learn optimal task assignments. Our approach, called HRL-TA, uses a graph neural network to model agent interactions and a hierarchical reinforcement learning architecture to coordinate task assignments. We evaluate HRL-TA on a range of simulated scenarios and demonstrate its ability to adapt to changing environmental conditions and agent failures, outperforming traditional centralized allocation methods.