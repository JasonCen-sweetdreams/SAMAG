Query expansion (QE) is a crucial component in information retrieval systems, as it can significantly improve the retrieval performance. However, traditional QE methods often rely on term co-occurrence statistics, which may not capture the semantic relationships between terms. This paper proposes a novel hierarchical document embedding (HDE) framework for QE, which leverages both local and global contextual information. Our approach represents documents as hierarchical graphs, where nodes correspond to terms, and edges denote their co-occurrence relationships. We then learn dense embeddings for these graphs using a graph neural network. Experimental results on several benchmark datasets demonstrate that HDE-based QE outperforms state-of-the-art methods in terms of retrieval effectiveness and efficiency.