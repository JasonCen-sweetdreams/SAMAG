In large-scale multi-agent systems, efficient task allocation is crucial for achieving system-wide goals. However, traditional centralized approaches suffer from scalability and robustness issues. This paper proposes a novel decentralized task allocation framework for heterogeneous agents, leveraging a combination of graph neural networks and distributed consensus protocols. Our approach enables agents to autonomously negotiate task assignments based on their individual capabilities and preferences, while ensuring global optimality and fairness. Experimental results on a simulated urban search and rescue scenario demonstrate significant improvements in task completion rates and system resilience compared to existing decentralized methods.