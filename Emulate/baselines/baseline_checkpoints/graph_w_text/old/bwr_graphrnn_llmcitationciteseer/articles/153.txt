In complex multi-agent systems, efficient task allocation is crucial for achieving global objectives. This paper introduces HATMA, a novel hierarchical attention network that learns to allocate tasks to agents based on their capabilities, task dependencies, and environmental constraints. HATMA employs a two-level attention mechanism to focus on relevant agents and tasks, reducing computational complexity and improving allocation quality. Experimental results on a variety of task allocation scenarios demonstrate that HATMA outperforms state-of-the-art methods in terms of task completion rate, latency, and resource utilization.