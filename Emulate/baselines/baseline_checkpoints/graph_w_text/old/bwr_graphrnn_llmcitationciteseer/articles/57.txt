Ad-hoc retrieval is a fundamental task in information retrieval, where the goal is to retrieve relevant documents for a given query. Query expansion is a widely used technique to improve retrieval performance, but it often relies on manual feature engineering and simplistic weighting schemes. This paper proposes a novel approach, 'DeepQE', which leverages deep neural networks to learn query expansion weights in an end-to-end fashion. Our model incorporates a self-attention mechanism to capture contextual relationships between query terms and a hierarchical neural network to model term importance. Experimental results on several benchmark datasets demonstrate that DeepQE outperforms state-of-the-art query expansion methods, achieving significant gains in retrieval performance and robustness.