In multi-agent systems, task allocation is a crucial problem that requires efficient and adaptive decision-making. This paper presents a decentralized approach to task allocation for heterogeneous agents with varying capabilities and preferences. Our proposed algorithm, 'Distributed Task Assignment Protocol' (DTAP), utilizes a novel combination of graph neural networks and consensus-based optimization to enable agents to negotiate and allocate tasks in a distributed manner. We evaluate DTAP through extensive simulations and demonstrate its effectiveness in improving system performance, reducing communication overhead, and enhancing robustness to agent failures.