This paper presents a novel approach to heterogeneous agent team formation for dynamic task allocation in smart cities. We propose a decentralized algorithm that integrates machine learning-based task prediction, graph-based coalition formation, and multi-agent planning to optimize task assignment and execution. Our approach leverages the strengths of different agent types, including autonomous vehicles, drones, and robots, to efficiently allocate tasks in a dynamic and uncertain environment. Experimental results in a simulated smart city scenario demonstrate that our approach outperforms traditional centralized and homogeneous team formation methods in terms of task completion time, resource utilization, and adaptability to changing conditions.