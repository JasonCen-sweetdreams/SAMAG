In multi-agent systems, task allocation is crucial for efficient collaboration. Existing approaches often rely on simplified models of agent capabilities and ignore contextual factors like spatial proximity and temporal constraints. This paper presents CAPTAIN, a novel planning framework that incorporates context-aware representations of agent capabilities and task requirements. CAPTAIN uses a hierarchical planning approach to allocate tasks, minimizing communication overhead and ensuring robustness to agent failures. Experimental results on a disaster response scenario demonstrate that CAPTAIN outperforms state-of-the-art task allocation methods in terms of task completion time and overall system efficiency.