This paper addresses the challenging problem of distributed task allocation in multi-agent systems, where agents with limited communication and computation resources need to collaborate to accomplish complex tasks. We propose a novel approach based on hierarchical graph attention networks (HGAT) that enables agents to learn a distributed task allocation strategy. Our method leverages the hierarchical structure of the agent network to focus attention on relevant agents and tasks, and to propagate information efficiently. Experiments on a variety of task allocation scenarios demonstrate the effectiveness of our approach in achieving high task completion rates while minimizing communication overhead.