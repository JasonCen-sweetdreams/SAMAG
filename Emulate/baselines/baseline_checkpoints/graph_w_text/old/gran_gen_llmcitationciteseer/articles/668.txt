The proliferation of Internet of Things (IoT) devices has created a need for efficient task allocation mechanisms that can adapt to dynamic environments. This paper presents a novel multi-agent coordination framework, called MACOTA, which leverages distributed constraint optimization techniques to allocate tasks to IoT devices in real-time. MACOTA employs a hierarchical agent architecture, where local agents negotiate with each other to find a globally optimal task assignment. We evaluate MACOTA using a simulated IoT testbed and demonstrate its scalability and effectiveness in reducing task completion times and energy consumption.