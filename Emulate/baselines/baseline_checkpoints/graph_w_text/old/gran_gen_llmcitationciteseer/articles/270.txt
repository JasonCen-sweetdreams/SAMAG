In multi-agent systems, resource allocation is a complex problem that requires coordinating agents to achieve optimal allocation. This paper proposes a novel approach that combines distributed constraint optimization (DCOP) with a hierarchical agent architecture. Our method, called Hierarchical-DCOP, allows agents to negotiate and allocate resources while respecting constraints and optimizing a global objective. We evaluate our approach on a real-world scenario of task allocation in a smart factory, demonstrating improved resource utilization and reduced communication overhead compared to existing methods.