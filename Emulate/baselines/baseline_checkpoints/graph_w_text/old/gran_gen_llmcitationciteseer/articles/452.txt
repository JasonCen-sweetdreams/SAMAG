Query expansion is a crucial component in ad-hoc retrieval, aiming to enrich the original query with relevant terms to improve retrieval effectiveness. This paper proposes a novel deep neural network-based approach, dubbed 'QNEX', which learns to generate high-quality expansion terms by modeling the semantic relationships between query terms and documents. QNEX leverages a hierarchical attention mechanism to selectively focus on the most informative terms and phrases in the top-retrieved documents. Experimental results on several benchmark datasets demonstrate that QNEX outperforms state-of-the-art query expansion methods, particularly in scenarios with limited query context.