Query expansion is a crucial technique in information retrieval (IR) to improve the retrieval performance by incorporating relevant terms into the original query. However, existing approaches often rely on manual feature engineering or simple term weighting schemes, leading to suboptimal performance. We propose a novel hierarchical neural network (HNN) architecture that learns to rank documents based on the query expansion. Our HNN model consists of a document encoder, a query encoder, and a ranking module, which jointly learn to identify relevant documents and generate effective query expansion terms. Experimental results on several benchmark datasets demonstrate that our approach outperforms state-of-the-art methods in terms of retrieval accuracy and efficiency.