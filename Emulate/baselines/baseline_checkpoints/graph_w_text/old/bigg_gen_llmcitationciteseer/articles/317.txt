In multi-agent systems, task allocation is a critical problem that requires coordinating agents with diverse capabilities and preferences. This paper proposes a novel deep reinforcement learning framework, 'HATRA', that enables heterogeneous agents to learn task allocation policies in dynamic environments. HATRA leverages a graph neural network to model agent interactions and a hierarchical reinforcement learning architecture to adapt to changing task requirements. Experiments in a simulated disaster response scenario demonstrate that HATRA outperforms traditional optimization-based approaches in terms of task completion efficiency and agent satisfaction.