In multi-agent systems, task allocation is a crucial problem that requires efficient assignment of tasks to agents with varying capabilities. This paper proposes a novel auction-based mechanism, 'HeteroAuction', which considers the diverse skills and resource constraints of agents. Our approach employs a two-stage auction protocol, where agents first bid on tasks based on their capabilities and then negotiate with the auctioneer to refine their bids. We prove that HeteroAuction achieves a Nash equilibrium and show through simulations that it outperforms existing allocation methods in terms of system efficiency and fairness.