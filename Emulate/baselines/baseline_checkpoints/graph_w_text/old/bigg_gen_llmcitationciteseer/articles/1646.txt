In multi-agent systems, task allocation is a crucial problem that requires efficient and scalable solutions. This paper proposes a novel approach based on hierarchical graph neural networks (HGNNs) to allocate tasks to agents in a distributed manner. Our method leverages the hierarchical structure of the agent network to learn a task allocation policy that minimizes communication overhead and maximizes system utility. We evaluate our approach on a set of benchmark scenarios and demonstrate significant improvements over existing methods in terms of allocation efficiency and robustness to agent failures.