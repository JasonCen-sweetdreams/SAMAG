We propose a novel hierarchical framework for task allocation in multi-agent systems, leveraging deep reinforcement learning to optimize task assignments. Our approach, called HMA-RL, consists of two stages: a high-level task decomposition stage, which partitions tasks into sub-tasks using a hierarchical clustering algorithm, and a low-level task allocation stage, which uses a deep Q-network to assign sub-tasks to agents. Experimental results on a simulated multi-robot scenario demonstrate that HMA-RL outperforms existing task allocation methods in terms of task completion time, agent utilization, and system adaptability to dynamic changes.