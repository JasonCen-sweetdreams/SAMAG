In multi-agent systems, task allocation is a crucial problem that involves assigning tasks to agents to maximize overall performance. However, in real-world scenarios, agents often operate under uncertainty, which can lead to suboptimal task allocation. This paper proposes a novel approach to task allocation that incorporates uncertainty-aware reward shaping. We introduce a probabilistic graphical model to represent the uncertainty in agent capabilities and task requirements, and develop a decentralized optimization algorithm to allocate tasks while maximizing expected reward. Experimental results on a simulated robotic search and rescue scenario demonstrate that our approach outperforms state-of-the-art methods in terms of task completion rate and overall system efficiency.