Modern search engines rely on query embeddings to capture the semantic meaning of user queries. However, existing methods often neglect the contextual information surrounding the query, leading to suboptimal document retrieval. This paper proposes a novel ranking-based approach, 'CAQE', that incorporates contextual features into query embeddings. By leveraging a graph-based attention mechanism, CAQE learns to weigh the importance of contextual terms and phrases, resulting in more accurate document retrieval. Experimental results on the TREC-CAR dataset demonstrate significant improvements in retrieval effectiveness over state-of-the-art methods.