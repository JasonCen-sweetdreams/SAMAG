Semantic search has become increasingly important in modern information retrieval systems. However, existing approaches often rely on flat query representations, which can lead to inefficient query processing and suboptimal results. This paper proposes a novel approach that leverages hierarchical query graphs (HQGs) to model complex semantic relationships between query entities. We develop a graph-based neural network that learns to compress and refine HQGs, enabling efficient query optimization and effective semantic matching. Experimental results on a large-scale knowledge graph dataset demonstrate significant improvements in search accuracy and query processing speed compared to state-of-the-art baseline methods.