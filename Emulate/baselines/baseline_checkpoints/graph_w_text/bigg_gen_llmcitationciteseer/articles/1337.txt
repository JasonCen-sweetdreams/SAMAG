Task allocation in multi-agent systems is a challenging problem, particularly in scenarios where agents have diverse capabilities and tasks require varying levels of resources. This paper proposes a novel hierarchical graph attention network (HGAT) model that learns to allocate tasks to agents by modeling their interactions and resource constraints. Our approach integrates graph attention mechanisms with hierarchical clustering to capture complex dependencies between agents and tasks. Experimental results on a series of benchmark datasets demonstrate that HGAT outperforms state-of-the-art task allocation algorithms, achieving significant improvements in task completion rates and resource utilization.