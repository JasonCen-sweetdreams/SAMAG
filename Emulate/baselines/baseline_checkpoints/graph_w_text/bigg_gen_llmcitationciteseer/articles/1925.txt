In this paper, we address the task allocation problem in heterogeneous multi-agent systems, where agents with diverse capabilities and constraints need to collaborate to achieve complex tasks. We propose a novel decentralized algorithm, 'ATAH', which leverages a combination of graph-based methods and constraint programming to efficiently allocate tasks to agents. Our approach takes into account the agents' capabilities, workload, and communication constraints to minimize the overall system latency and maximize task completion rates. Experimental results on a variety of synthetic and real-world scenarios demonstrate the effectiveness and scalability of ATAH compared to existing centralized and decentralized approaches.